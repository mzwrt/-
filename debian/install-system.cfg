# preseed.cfg for Debian installation with Chinese language, timezone, keyboard and custom disk partitions

# 设置语言和区域
d-i debian-installer/locale string zh_CN.UTF-8
# 设置系统语言为简体中文（zh_CN.UTF-8）
d-i debian-installer/language string zh
# 设置安装过程中使用的语言为中文
d-i debian-installer/country string CN
# 设置安装时使用的国家为中国（会影响时区和镜像源）
d-i debian-installer/keyboard/layout select US
# 设置键盘布局为美国键盘布局
d-i debian-installer/keyboard/model select Laptop
# 设置键盘模型为笔记本电脑（通常适用于大多数笔记本）

# 网络配置
d-i netcfg/choose_interface select auto
# 自动选择网络接口，通常会选择第一个可用的网络接口（如 eth0 或 wlan0）
d-i netcfg/get_nameservers string 8.8.8.8 8.8.4.4
# 设置 DNS 服务器为 Google 的公共 DNS（8.8.8.8 和 8.8.4.4）
d-i netcfg/get_ipaddress string dhcp
# 使用 DHCP 自动获取 IP 地址。若使用静态 IP，可以替换为类似 "192.168.1.100" 的地址。

# 设置镜像源
d-i mirror/country string KR
# 设置镜像源的国家为韩国
d-i mirror/http/hostname string ftp.kr.debian.org
# 设置镜像源主机为韩国的 Debian 镜像源（ftp.kr.debian.org）
d-i mirror/http/directory string /debian
# 设置镜像源目录为 /debian

# 磁盘分区配置
d-i partman-auto/method string regular
# 使用常规分区方式（不使用 LVM 或 RAID）

# 创建分区：
# 分区设置
d-i partman-auto/choose_recipe select custom
d-i partman-auto/confirm boolean true
d-i partman-auto/confirm_nooverwrite boolean true

# 自定义磁盘分区方案：
# 删除现有的分区表
d-i partman-partitioning/confirm_write_new_label boolean true
# 创建 EFI 启动分区（500MB）
d-i partman-auto/expert_recipe string \
    efi::500 500 500 fat32 \
    $primary{ } \
    method{ format } format{ } \
    use_filesystem{ } filesystem{ vfat } \
    mountpoint{ /boot/efi } \
    . \
    # 创建 /boot 分区（1.2GB）
    boot::1200 1200 1200 ext4 \
    $primary{ } \
    method{ format } format{ } \
    use_filesystem{ } filesystem{ ext4 } \
    mountpoint{ /boot } \
    . \
    # 创建 /tmp 和 /var/tmp 分区（2GB）
    tmp::2000 2000 2000 ext4 \
    $primary{ } \
    method{ format } format{ } \
    use_filesystem{ } filesystem{ ext4 } \
    mountpoint{ /tmp } \
    . \
    # 创建 /www/wwwlogs 和 /var/log 分区（3GB）
    www::3000 3000 3000 ext4 \
    $primary{ } \
    method{ format } format{ } \
    use_filesystem{ } filesystem{ ext4 } \
    mountpoint{ /www } \
    . \
    # 创建交换分区（2GB）
    swap::2000 2000 2000 linux-swap \
    method{ swap } format{ } \
    . \
    # 剩下的磁盘挂载到根分区 /
    root:: 0 0 0 ext4 \
    method{ format } format{ } \
    use_filesystem{ } filesystem{ ext4 } \
    mountpoint{ / } \
    .

# 系统时区设置
d-i time/zone string Asia/Shanghai
# 设置时区为中国时区（Asia/Shanghai）

# 设置 root 密码
d-i passwd/root-password password "rPu%Z3)U'&nu9G%29xgATat&QR[^elPebInD"
# 设置 root 用户的密码为 `yourpassword`（可以替换为实际密码）
d-i passwd/root-password-again password "rPu%Z3)U'&nu9G%29xgATat&QR[^elPebInD"
# 确认 root 用户密码是否一致

# 设置用户
d-i passwd/user-fullname string "jnfyic136dth24st2cqw7ke80m"
# 设置新用户的全名为 `Your Name`
d-i passwd/username string jnfyic136dth24st2cqw7ke80m
# 设置新用户的用户名为 `yourusername`
d-i passwd/user-password password "L^k49,$1_@.&Vlsbdpk@1qDH#)uwU^3="
# 设置新用户的密码为 `yourpassword`
d-i passwd/user-password-again password "L^k49,$1_@.&Vlsbdpk@1qDH#)uwU^3="
# 确认新用户的密码是否一致

# 包选择：安装最小系统
d-i pkgsel/include string openssh-server
# 仅安装 OpenSSH 服务器包，最小化系统，不安装桌面环境或其他额外软件

# 不安装推荐的包（最小化安装）
d-i pkgsel/skip-recommends boolean true

# 设置 GRUB 引导器
d-i grub-installer/only_debian boolean true
# 仅安装 Debian 的 GRUB 引导程序
d-i grub-installer/bootdev string /dev/sda
# 安装 GRUB 到第一个硬盘 `/dev/sda`

# 设置安装后重启
d-i finish-install/reboot_in_progress note
